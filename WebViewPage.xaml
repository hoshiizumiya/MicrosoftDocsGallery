<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="MicrosoftDocsGallery.WebViewPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:MicrosoftDocsGallery"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <!-- NavigationView for table of contents -->
            <ColumnDefinition Width="300" MinWidth="200" MaxWidth="400"/>
            <ColumnDefinition Width="Auto"/>
            <!-- Main content area -->
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Table of Contents NavigationView -->
        <NavigationView
            x:Name="DocNavigationView"
            Grid.Column="0"
            Header="Table of Contents"
            IsBackButtonVisible="Collapsed"
            IsPaneToggleButtonVisible="False"
            IsSettingsVisible="False"
            ItemInvoked="DocNavigation_ItemInvoked"
            PaneDisplayMode="Top"
            OpenPaneLength="300">
            
            <NavigationView.MenuItems>
                <!-- TOC items will be populated dynamically -->
            </NavigationView.MenuItems>
            
            <NavigationView.Content>
                <StackPanel Margin="10" Spacing="8">
                    <!-- Search box for quick navigation -->
                    <TextBox 
                        x:Name="SectionSearchBox"
                        PlaceholderText="Search in document..."
                        TextChanged="SectionSearch_TextChanged"/>
                    
                    <!-- Favorite button -->
                    <Button x:Name="FavoriteButton"
                            Content="Add to Favorites"
                            HorizontalAlignment="Stretch"
                            Style="{StaticResource AccentButtonStyle}"
                            Click="FavoriteButton_Click">
                        <Button.Resources>
                            <Style TargetType="Button" BasedOn="{StaticResource AccentButtonStyle}">
                                <Setter Property="Content" Value="Add to Favorites"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    
                    <!-- Quick actions -->
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <Button Content="&#xE72C;" 
                                FontFamily="Segoe MDL2 Assets"
                                Style="{StaticResource SubtleButtonStyle}"
                                ToolTipService.ToolTip="Refresh"
                                Click="RefreshPage_Click"/>
                        <Button Content="&#xE8A7;" 
                                FontFamily="Segoe MDL2 Assets"
                                Style="{StaticResource SubtleButtonStyle}"
                                ToolTipService.ToolTip="Open in Browser"
                                Click="OpenInBrowser_Click"/>
                        <Button Content="&#xE72D;" 
                                FontFamily="Segoe MDL2 Assets"
                                Style="{StaticResource SubtleButtonStyle}"
                                ToolTipService.ToolTip="Share"
                                Click="SharePage_Click"/>
                    </StackPanel>
                </StackPanel>
            </NavigationView.Content>
        </NavigationView>

        <!-- Splitter -->
        <Border Grid.Column="1" Background="{ThemeResource SystemControlBackgroundBaseLowBrush}" Width="1"/>

        <!-- Main TabView Area -->
        <TabView
            x:Name="WebTabView"
            Grid.Column="2"
            AddTabButtonClick="TabView_AddButtonClick"
            CloseButtonOverlayMode="OnPointerOver"
            TabCloseRequested="TabView_TabCloseRequested"
            SelectionChanged="TabView_SelectionChanged">
            
            <!-- Default tab template -->
            <TabView.TabItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Tab icon -->
                        <FontIcon 
                            Grid.Column="0"
                            Glyph="&#xE7BE;" 
                            FontSize="12"
                            Margin="0,0,6,0"/>
                        
                        <!-- Tab title -->
                        <TextBlock 
                            Grid.Column="1"
                            Text="{Binding Title}"
                            MaxWidth="150"
                            TextTrimming="CharacterEllipsis"
                            VerticalAlignment="Center"/>
                        
                        <!-- Loading indicator -->
                        <ProgressRing 
                            Grid.Column="2"
                            Width="16" 
                            Height="16"
                            Margin="6,0,0,0"
                            IsActive="{Binding IsLoading}"
                            Visibility="{Binding IsLoading}"/>
                    </Grid>
                </DataTemplate>
            </TabView.TabItemTemplate>
        </TabView>
    </Grid>
</Page>
